(()=>{var e={695:()=>{var e=document.querySelector(".navigation__burger");e.addEventListener("click",(function(){e.classList.toggle("active")}))}},t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={exports:{}};return e[a](r,r.exports,n),r.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var a=t.getElementsByTagName("script");a.length&&(e=a[a.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),(()=>{"use strict";n.p,n.p,n.p,n.p,n.p,n.p,n.p,n(695)})(),(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var t=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}var n,a;return n=t,a=[{key:"setStorage",value:function(e,t){var n=JSON.stringify(t);localStorage.setItem(e,n)}},{key:"getStorage",value:function(e){return null!==localStorage.getItem(e)?JSON.parse(localStorage.getItem(e)):""}},{key:"removeStorage",value:function(e){localStorage.removeItem(e)}},{key:"clearAllStorage",value:function(){localStorage.clear()}}],null&&e(n.prototype,null),a&&e(n,a),t}();function n(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var a=function(){function e(n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=t.getStorage("categories");this.categories=r?new Set(r):new Set(n),this.filters={category:new Set,author:new Set,priority:new Set},this.tHeadsNames=["Author","Title","Category","Priority","Actions"],this.priorityAmount=a;var o=t.getStorage("Books");this.books=o||[]}var a,r;return a=e,(r=[{key:"addBook",value:function(e){this.books.push(e)}},{key:"deleteBook",value:function(e){this.books.splice(e.id,1)}},{key:"getBook",value:function(e){return this.books.find((function(t){return t.id===e}))}},{key:"updateBook",value:function(e,t){this.books.map((function(n){return n.id===e?Object.assign(n,t):n}))}},{key:"resetId",value:function(){this.books.forEach((function(e,t){return e.id=t}))}},{key:"addFilter",value:function(e,t){this.filters[e].add(t)}},{key:"deleteFilter",value:function(e){for(var t in this.filters)this.filters[t].delete(e)}},{key:"hasFilters",value:function(){var e=!1;for(var t in this.filters)if(this.filters[t].size){e=!0;break}return e}},{key:"filterList",value:function(){var e=this,t=Object.keys(this.filters);return this.books.filter((function(n){return t.every((function(t){return!e.filters[t].size||e.filters[t].has(n[t])}))}))}},{key:"sortBooks",value:function(e,t,n){var a=function(e){return e.charAt(0).toLowerCase()+e.slice(1)};return e.sort((function(e,r){var o=e[a(t)].toLowerCase(),i=r[a(t)].toLowerCase();switch(n){case"asc":return o.localeCompare(i);case"desc":return i.localeCompare(o);default:return e.id-r.id}}))}},{key:"searchObjects",value:function(e){return e?this.books.map((function(t){return t[e]})):new Error("Enter search Value")}}])&&n(a.prototype,r),e}();function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var o=function(e,t,n,a,r,o){var i=document.createElement("span"),s=document.createElement("img");return s.src=e,s.alt=t,s.dataset.action=r,s.className=n,i.className=a,"export"===r&&(s.dataset.toggle="modal",s.dataset.target="#exampleModalCenter"),s.addEventListener("click",o),i.appendChild(s),i};function i(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.subscribers=[],this.list=new a(["Crime","Sci-Fi","Fantasy","Poetry","Drama","Science"],5),this.getFilters=this.list.searchObjects("author"),this.tHeads=this.list.tHeadsNames,this.state={listView:"list",booksAmount:this.list.books.length,filtered:[],mode:["asc","desc","default"],variantMode:0,currentThead:""},this.getRootList=function(){return n},this.getHeader=function(){return r},this.getTBody=function(){return o},this.getSelectOptionElement=function(e){return document.getElementById(e)};var n=this.createRootList(),r=this.createHeader(this.getFilters),o=this.getRootList().querySelector(".bookList_Cnt");this.attachToCnt(t,this.getHeader()),this.attachToCnt(t,this.getRootList())}var t,n;return t=e,(n=[{key:"attachToCnt",value:function(e,t){document.querySelector(e).appendChild(t)}},{key:"createRootList",value:function(){var e=document.createElement("div");return e.className="bookList_content",e.appendChild(this.bookListContentHeader()),"list"===this.state.listView?e.appendChild(this.createTable()):e.appendChild(this.createGrid()),e}},{key:"createHeader",value:function(){var e=document.createElement("header");return e.className="bookList_header",e.appendChild(this.createHeaderTitle("Book List")),e.appendChild(this.createFilterPanel("bookListFilters","Filters")),e}},{key:"createHeaderTitle",value:function(e){var t=document.createElement("h3");return t.className="bookList_header-title",t.textContent=e,t}},{key:"createFilterPanel",value:function(e,t){var n=document.createElement("div"),a=document.createElement("div"),r=document.createElement("div"),o=document.createElement("label");o.htmlFor=e,o.textContent=t,n.className="filtersPanel",a.className="bookList_header-filters_cnt form-group d-flex justify-content-between",a.id=e,r.className="bookList_header-filtersBadgesPanel form-group d-flex flex-row";var i=Array.from(Array(this.list.priorityAmount),(function(e,t){return t+1})),s=this.createOptionFilterInput("categoryOptionFilter","category",this.list.categories,"category"),c=this.createOptionFilterInput("authorOptionFilter","author",this.list.searchObjects("author"),"author"),l=this.createOptionFilterInput("priorityOptionFilter","priority",i,"priority");return a.appendChild(s),a.appendChild(c),a.appendChild(l),n.appendChild(o),n.appendChild(a),n.appendChild(r),n}},{key:"createOptionFilterInput",value:function(e,t,n,a){var r=document.createElement("select"),o=document.createElement("option"),i=document.createElement("label"),s=document.createElement("div");return r.id=e,r.className="form-control",r.dataset.name=t,r.dataset.action="filter",o.textContent="Choose...",o.value="",r.appendChild(o),this.handleOptionClickedEvent(r),this.renderOptionFilter(n,r),i.htmlFor=e,i.textContent=a,s.className="form-group",s.appendChild(i),s.appendChild(r),s}},{key:"renderOptionFilter",value:function(e,t){this.clearOptionFilter(t),e.forEach((function(e){var n=document.createElement("option");n.value=e,n.textContent=e,t.appendChild(n)}))}},{key:"handleOptionClickedEvent",value:function(e){var t=this;e.addEventListener("change",(function(e){e.target.value&&t.list.addFilter(e.target.dataset.name,e.target.value),t.renderFilterBadges(),t.state.filtered=t.list.filterList(),t.notify(e),i(e.target.children)[0].selected=!0}))}},{key:"renderFilterBadges",value:function(){var e=this,t=document.querySelector(".bookList_header-filtersBadgesPanel");for(var n in this.clearFilterBadgeCnt(t),this.list.filters)i(this.list.filters[n]).forEach((function(n){return t.appendChild(e.createFilterBadge(n))}))}},{key:"clearFilterBadgeCnt",value:function(e){var t=e.querySelectorAll(".badge");t&&t.forEach((function(e){return e.remove()}))}},{key:"createFilterBadge",value:function(e){var t=this,n=document.createElement("span");return n.className="badge badge-primary",n.textContent=e,n.dataset.action="filter",n.addEventListener("click",(function(e){t.list.deleteFilter(e.target.textContent),e.target.remove(),t.state.filtered=t.list.filterList(),t.notify(e)})),n}},{key:"clearOptionFilter",value:function(e){e.querySelectorAll("option").forEach((function(e){return e.value?e.remove():null}))}},{key:"bookListContentHeader",value:function(){var e=document.createElement("div");return e.classList="bookListContentHeader form-group d-flex justify-content-between",e.appendChild(this.createTableLabel("bookListTable",this.state.booksAmount)),e.appendChild(this.createActionBtnsPanel()),e}},{key:"createTableLabel",value:function(e,t){var n=document.createElement("label"),a=document.createElement("span");return a.className="booksAmount",a.textContent=t,n.htmlFor=e,n.textContent="Books Amount: ",n.appendChild(a),n}},{key:"createActionBtnsPanel",value:function(){var e=document.createElement("div");e.className="actionBtnsPanel";var t=o("./assets/grid.svg","grid-icon","icon grid_icon","icon_Cnt","grid",this.notify.bind(this)),n=o("./assets/list.svg","list-icon","icon list_icon","icon_Cnt","list",this.notify.bind(this)),a=o("./assets/export.svg","export-icon","icon export_icon","icon_Cnt","export",this.notify.bind(this));return e.appendChild(t),e.appendChild(n),e.appendChild(a),e}},{key:"createTable",value:function(){var e=document.createElement("table");return e.className="table",e.id="bookList",e.appendChild(this.craeteThead()),e.appendChild(this.createTbody()),e}},{key:"createGrid",value:function(){var e=document.createElement("div"),t=document.createElement("div");return t.className="bookList_Cnt d-flex justify-content-between",e.className="grid",e.id="bookList",e.appendChild(t),e}},{key:"resetView",value:function(){document.getElementById("bookList").remove()}},{key:"craeteThead",value:function(){var e=this,t=document.createElement("thead"),n=document.createElement("tr");return this.tHeads.forEach((function(t){var a=document.createElement("th");a.scope="col",a.className="thead thead-".concat(t),a.textContent=t,a.dataset.action="sort",a.addEventListener("click",(function(n){switch(a.className){case"thead thead-Author":case"thead thead-Category":case"thead thead-Priority":n.target.textContent!==e.state.currentThead&&e.state.currentThead?(e.state.currentThead=t,e.state.variantMode=0,e.notify(n),e.state.variantMode<2?e.state.variantMode++:e.state.variantMode=0):(e.state.currentThead=t,e.notify(n),e.state.variantMode<2?e.state.variantMode++:e.state.variantMode=0);break;default:return}})),n.appendChild(a)})),t.appendChild(n),t}},{key:"createTbody",value:function(){var e=document.createElement("tbody");return e.className="bookList_Cnt",e}},{key:"resetId",value:function(){this.getTBody().querySelectorAll("tr").forEach((function(e,t){return e.setAttribute("data-id",t)}))}},{key:"setBooksAmount",value:function(){document.querySelector(".booksAmount").textContent=this.list.hasFilters()?this.state.filtered.length:this.state.booksAmount}},{key:"clearItems",value:function(){i(document.querySelector(".bookList_Cnt").children).forEach((function(e){e.remove()}))}},{key:"notify",value:function(e){var t=this,n=e.target.dataset.action;this.subscribers.forEach((function(a){switch(n){case"filter":a({action:n});break;case"sort":var r=t.state,o=r.mode,i=r.variantMode;a({action:n,sortMode:o[i],tHead:e.target.textContent});break;case"list":t.state.listView="list",a({action:n,listView:t.state.listView});break;case"grid":t.state.listView="grid",a({action:n,listView:t.state.listView});break;case"export":t.state.listView="list",a({action:n,listView:t.state.listView});break;default:return}}))}},{key:"registerSubscribers",value:function(e){this.subscribers.push(e)}}])&&c(t.prototype,n),e}();function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function d(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var h=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var n,a;return n=e,a=[{key:"getInputsForm",value:function(){return document.querySelectorAll("[data-role=form-input]")}},{key:"getTitleInput",value:function(){return document.getElementById("titleInput")}},{key:"getAuthorInput",value:function(){return document.getElementById("authorInput")}},{key:"getCategoryOptionLabel",value:function(){return document.querySelector('[for="categoryOptionSelect"]')}},{key:"getCategoryInput",value:function(){return document.getElementById("categoryOptionSelect")}},{key:"getAddCategoryInput",value:function(){return document.getElementById("addCategory")}},{key:"getAddCategoryBtn",value:function(){return document.getElementById("addCategory-btn")}},{key:"getPriorityRadio",value:function(e){return document.getElementById("inlineRadio".concat(e))}},{key:"getAddBtn",value:function(){return document.getElementById("add-btn")}},{key:"isNotEmpty",value:function(e){return""!==e.value&&/^[^\s].+[^\s]$/g.test(e.value)}},{key:"isChecked",value:function(){return document.querySelector("[name=priority]:checked")}},{key:"isSelected",value:function(){return""!==this.getCategoryInput().options[this.getCategoryInput().selectedIndex].value}},{key:"showMsg",value:function(e,t,n){var a=document.createElement("div");a.className="alert alert-".concat(t),a.textContent=n,this.removeShowMsg(e),e.parentNode.insertBefore(a,e)}},{key:"removeShowMsg",value:function(e){e.previousElementSibling.classList.contains("alert")&&e.previousElementSibling.remove()}},{key:"isValid",value:function(){var e=!1;return this.isNotEmpty(this.getAuthorInput())?this.removeShowMsg(this.getAuthorInput()):(this.showMsg(this.getAuthorInput(),"danger","You should name the author"),e=!0),this.isNotEmpty(this.getTitleInput())?this.removeShowMsg(this.getTitleInput()):(this.showMsg(this.getTitleInput(),"danger","You should name the title"),e=!0),this.isSelected()?this.removeShowMsg(this.getCategoryInput()):(this.showMsg(this.getCategoryInput(),"danger","Please choose category"),e=!0),this.isChecked()?this.removeShowMsg(document.getElementById("priorityCheckBoxesCnt")):(this.showMsg(document.getElementById("priorityCheckBoxesCnt"),"danger","Please set the priority"),e=!0),!e}},{key:"setEditForm",value:function(t){var n=t.author,a=t.title,r=t.category,o=t.priority;e.getAuthorInput().value=n,e.getTitleInput().value=a,e.getCategoryInput().value=r,e.getPriorityRadio(o).checked=!0,e.getAddBtn().textContent="Edit",e.getAddBtn().dataset.action="edit",e.getAddBtn().className="btn btn-warning btn-edit"}},{key:"setDefaultForm",value:function(){e.getAddBtn().textContent="Add",e.getAddBtn().dataset.action="add",e.getAddBtn().className="btn btn-success btn-add"}},{key:"getData",value:function(){return this.isValid()?{title:this.getTitleInput().value,author:this.getAuthorInput().value,category:this.getCategoryInput().value,priority:this.isChecked().value}:null}},{key:"clearForm",value:function(){this.getTitleInput().value="",this.getAuthorInput().value="",this.getCategoryInput().value="",this.getAddCategoryInput().value="",this.isChecked()&&(this.isChecked().checked=!1)}},{key:"addCategory",value:function(n){var a,r,o=this,i=!1,s=(a=this.getAddCategoryInput().value).charAt(0).toUpperCase()+a.slice(1);return n.has(s)?(e.showMsg(this.getAddCategoryInput(),"warning","The category has already exist, enter another."),setTimeout((function(){return o.removeShowMsg(o.getAddCategoryInput())}),2e3)):(n.add(s),this.showMsg(this.getAddCategoryInput(),"success","You've added new category"),this.getAddCategoryInput().classList.toggle("active"),this.getCategoryInput().classList.toggle("active"),this.getAddCategoryBtn().classList.toggle("active"),t.removeStorage("addCategory"),t.setStorage("categories",function(e){if(Array.isArray(e))return u(e)}(r=n)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),this.getAddCategoryInput().value="",setTimeout((function(){return o.removeShowMsg(o.getAddCategoryInput())}),2e3),i=!0),i}},{key:"setInputsStorage",value:function(e){var n=this;e.forEach((function(e){e.addEventListener("input",(function(){t.setStorage(e.name,e.value),n.getCategoryInput().classList.contains("active")&&t.removeStorage("addCategory"),n.getAddCategoryInput().classList.contains("active")&&t.removeStorage("category")}))}))}},{key:"getInputsStorage",value:function(e){e.forEach((function(e){if(t.getStorage(e.name)&&"radio"===e.type){var n=t.getStorage(e.name);document.getElementById("inlineRadio".concat(n)).checked=!0}else{if("radio"===e.type)return;e.value=t.getStorage(e.name)}}))}},{key:"clearStorage",value:function(e){e.forEach((function(e){return t.removeStorage(e.name)}))}}],null&&d(n.prototype,null),a&&d(n,a),e}();function p(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var m=function(){function e(t,n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=this.createRoot(),o=n,i=a;this.subscribers=[],this.createForm(r,o,i),this.attachToCnt(t,r),h.getInputsStorage(h.getInputsForm()),h.setInputsStorage(h.getInputsForm()),this.swtichCategoryInput()}var t,n;return t=e,(n=[{key:"attachToCnt",value:function(e,t){document.querySelector(e).appendChild(t)}},{key:"createRoot",value:function(){return document.createElement("form")}},{key:"createForm",value:function(e,t,n){e.appendChild(this.createInput("text","titleInput","title","Book Title","Title",!0)),e.appendChild(this.createInput("text","authorInput","author","Book Author","Author",!0)),e.appendChild(this.createOptionInput("categoryOptionSelect","category",t,"Category")),e.appendChild(this.createRadioInput("priorityCheckBoxesCnt","priority","Priority",n)),e.appendChild(this.createBtn("button","clear-btn","btn btn-danger btn-clear","Clear","clear")),e.appendChild(this.createBtn("button","add-btn","btn btn-success btn-add","Add","add"))}},{key:"createInput",value:function(e,t,n,a,r,o){var i=document.createElement("input"),s=document.createElement("label"),c=document.createElement("div");return s.htmlFor=t,s.textContent=a,i.type=e,i.id=t,i.name=n,i.className="form-control",i.dataset.role="form-input",i.required=o,i.placeholder=r,i.required=o,c.className="form-group",c.appendChild(s),c.appendChild(i),c}},{key:"createOptionInput",value:function(e,t,n,a){var r=document.createElement("select"),o=document.createElement("option"),i=document.createElement("label"),s=document.createElement("input"),c=document.createElement("div");return r.id=e,r.className="form-control active",r.name=t,r.dataset.role="form-input",o.textContent="Choose...",o.value="",s.type="text",s.id="addCategory",s.className="form-control",s.name="addCategory",s.placeholder="Add category",s.required=!0,s.dataset.role="form-input",r.appendChild(o),this.renderCategories(n,r),i.htmlFor=e,i.textContent=a,c.className="form-group",c.appendChild(i),c.appendChild(this.createBtn("button","addCategory-btn","btn btn-success btn-add-category","add category","addCategory")),c.appendChild(s),c.appendChild(r),c}},{key:"createRadioInput",value:function(e,t,n,a){for(var r=document.createElement("div"),o=document.createElement("label"),i=document.createElement("div"),s=1;s<=a;s++){var c=document.createElement("div"),l=document.createElement("input"),u=document.createElement("label");c.className="form-check form-check-inline",l.id="inlineRadio".concat(s),l.className="form-check-input",l.type="radio",l.value=s,l.name=t,l.dataset.role="form-input",u.className="form-check-label",u.textContent="".concat(s),u.htmlFor="inlineRadio".concat(s),c.appendChild(l),c.appendChild(u),i.appendChild(c)}return r.className="form-group",o.htmlFor=e,o.textContent=n,i.id=e,r.appendChild(o),r.appendChild(i),r}},{key:"createBtn",value:function(e,t,n,a,r){var o=this,i=document.createElement("button");return i.type=e,i.id=t,i.className=n,i.textContent=a,i.dataset.action=r,i.addEventListener("click",(function(e){var t=e.target.dataset.action;"clear"===t?(h.clearForm(),h.setDefaultForm(),h.clearStorage(h.getInputsForm())):o.subscribers.forEach((function(n){switch(t){case"edit":h.getData()&&n({action:e.target.dataset.action,id:o.state.editedBookID,data:h.getData(),editedElement:o.state.editedElement});break;case"add":h.getData()&&n({action:e.target.dataset.action,data:h.getData()});break;case"addCategory":n({action:e.target.dataset.action,value:h.getAddCategoryInput().value});default:return}}))})),i}},{key:"renderCategories",value:function(e,t){this.clearCategories(t),e.forEach((function(e){var n=document.createElement("option");n.value=e,n.textContent=e,t.appendChild(n)}))}},{key:"clearCategories",value:function(e){e.querySelectorAll("option").forEach((function(e){e.value&&e.remove()}))}},{key:"swtichCategoryInput",value:function(){h.getCategoryOptionLabel().addEventListener("click",(function(e){e.preventDefault(),h.getAddCategoryInput().classList.toggle("active"),h.getCategoryInput().classList.toggle("active"),h.getAddCategoryBtn().classList.toggle("active")}))}},{key:"registerSubcribers",value:function(e){this.subscribers.push(e)}}])&&p(t.prototype,n),e}(),g=function e(t,n,a,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.author=n,this.title=a,this.category=r,this.priority=o};function f(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var y=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.subscribers=[],this.getElement=function(e){return e.parentNode.parentNode.parentNode},this.getElementID=function(e){return Number(e.parentNode.parentNode.parentNode.dataset.id)},this.renderBooks(t.getStorage("Books"),"list")}var n,a;return n=e,(a=[{key:"createBook",value:function(e,t,n){"list"===t?this.createListBook(e,n):this.createTileBook(e,n)}},{key:"createListBook",value:function(e,t){var n=document.createElement("tr");for(var a in t)if("id"!==a){var r=this.createTableData(a,t[a]);n.appendChild(r)}n.dataset.id=t.id,n.appendChild(this.createIconsContainer()),document.querySelector(e).appendChild(n)}},{key:"createTileBook",value:function(e,t){var n=t.id,a=t.author,r=t.title,o=t.category,i=t.priority,s=document.createElement("div"),c=document.createElement("div"),l=document.createElement("h4"),u=document.createElement("h5"),d=document.createElement("span"),h=document.createElement("span");s.className="card",c.className="card-body",l.className="card-title title",u.className="card-subtitle mb-2 text-muted author",d.className="badge badge-primary category",h.className="badge badge-secondary priority",s.dataset.id=n,l.textContent=r,u.textContent=a,d.textContent=o,h.textContent=i,c.appendChild(l),c.appendChild(u),c.appendChild(d),c.appendChild(h),s.appendChild(c),s.appendChild(this.createIconsContainer()),document.querySelector(e).appendChild(s)}},{key:"updateBookElement",value:function(e,t){for(var n in t)e.querySelector(".".concat(n)).textContent=t[n]}},{key:"createTableData",value:function(e,t){var n=document.createElement("td");return n.className=e,n.textContent=t,n}},{key:"createIconsContainer",value:function(){var e=document.createElement("div");e.className="iCons_cnt";var t=o("./assets/edit-regular.svg","edit-icon","icon edit_icon","icon_Cnt","edit",this.notify.bind(this)),n=o("./assets/trash-alt-regular.svg","delete-icon","icon delete_icon","icon_Cnt","delete",this.notify.bind(this));return e.appendChild(t),e.appendChild(n),e}},{key:"renderBooks",value:function(e,t){var n=this;e.forEach((function(e){return n.createBook(".bookList_Cnt",t,e)}))}},{key:"notify",value:function(e){var t=this;this.subscribers.forEach((function(n){n({id:t.getElementID(e.target),action:e.target.dataset.action,element:t.getElement(e.target)})}))}},{key:"registerSubscribers",value:function(e){this.subscribers.push(e)}}])&&f(n.prototype,a),e}(),v=new l(".bookList_section"),b=new m(".form_cnt",v.list.categories,v.list.priorityAmount),k=new y;b.registerSubcribers((function(e){switch(e.action){case"add":var n=v.list.books.length,a=e.data,r=a.title,o=a.author,i=a.category,s=a.priority,c=new g(n,r,o,i,s);v.list.addBook(c),k.createBook(".bookList_Cnt",v.state.listView,c),t.setStorage("Books",v.list.books),h.clearForm(),h.clearStorage(h.getInputsForm()),v.state.booksAmount=v.list.books.length,v.setBooksAmount();break;case"edit":var l=e.data,u=e.id,d=e.editedElement;v.list.updateBook(u,l),k.updateBookElement(d,l),t.setStorage("Books",v.list.books),h.setDefaultForm(),h.clearForm(),h.clearStorage(h.getInputsForm());break;case"addCategory":h.addCategory(v.list.categories),b.renderCategories(v.list.categories,h.getCategoryInput()),v.renderOptionFilter(v.list.categories,v.getSelectOptionElement("categoryOptionFilter"));break;default:throw Error("Action not recognized")}})),k.registerSubscribers((function(e){var n=e.id,a=e.action,r=e.element,o=v.list.getBook(n);"edit"===a?(b.state={editedBookID:n,editedElement:r},h.setEditForm(o)):(v.list.deleteBook(o),v.list.resetId(),r.remove(),v.resetId(),v.state={booksAmount:v.list.books.length},v.setBooksAmount(),t.setStorage("Books",v.list.books))})),v.registerSubscribers((function(e){var t,n,a=e.action,o=v.state,i=o.filtered,s=o.listView,c=v.list.hasFilters()?i:v.list.books;switch(a){case"filter":v.clearItems(),k.renderBooks(i,s),v.setBooksAmount();break;case"sort":var l=e.sortMode,u=e.tHead,d=v.list.hasFilters()?v.list.sortBooks(i,u,l):v.list.sortBooks(v.list.books,u,l);v.clearItems(),k.renderBooks(d,s);break;case"list":v.resetView(),v.getRootList().appendChild(v.createTable()),k.renderBooks(c,s);break;case"grid":v.resetView(),v.getRootList().appendChild(v.createGrid()),k.renderBooks(c,s);break;case"export":v.resetView(),v.getRootList().appendChild(v.createTable()),k.renderBooks(v.list.books,s),t=document.createElement("div"),n=document.createDocumentFragment(),t.className="modal fade",t.id="exampleModalCenter",t.tabIndex="-1",t.dataset.role="dialog",t.setAttribute("aria-labelledby","exampleModalCenterTitle"),t.setAttribute("aria-hidden","true"),t.innerHTML='\n  \n  <div class="modal-dialog modal-dialog-centered" role="document">\n    <div class="modal-content">\n      <div class="modal-header">\n        <h5 class="modal-title" id="exampleModalLongTitle">Modal title</h5>\n        <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n          <span aria-hidden="true">&times;</span>\n        </button>\n      </div>\n      <div class="modal-body">\n        Export Table to :\n      </div>\n      <div class="modal-footer">\n        <button type="button" class="btn btn-success" id="pdf">Export To PDF</button> \n        <button type="button" class="btn btn-success" id="csv">Export To CSV</button> \n        <button type="button" class="btn btn-success" id="txt">Export To XML</button> \n        <button type="button" class="btn btn-success" id="json">Export To JSON</button> \n        \n      </div>\n    </div>\n  </div>\n\n  ',n.appendChild(t),document.querySelector(".container").appendChild(n),function(){var e,t=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw i}}}}(document.getElementById("exampleModalCenter").querySelectorAll("button"));try{for(t.s();!(e=t.n()).done;)e.value.addEventListener("click",(function(e){var t=e.target.id;$("#bookList").tableHTMLExport({type:"".concat(t),filename:"table.".concat(t),ignoreColumns:"actions"})}),!1)}catch(e){t.e(e)}finally{t.f()}}();default:return}}))})()})();